(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6336],{22745:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fines/details/[fineId]",function(){return i(74686)}])},74686:function(e,n,i){"use strict";i.r(n);var t=i(85893),l=i(67294),a=i(9008),s=i.n(a),c=i(30985),r=i(50542),o=i(87357),d=i(86886),u=i(15861),f=i(83321),x=i(66242),h=i(78445),m=i(67720),v=i(44267),_=i(50135),j=i(18972),g=i(33841),Z=i(77058),p=i(68852),P=i(68586),b=i(75920),y=i(71341),w=i(80332),C=i(1902);i(15063);function O(e,n,i){return n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}function k(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{},t=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),t.forEach((function(n){O(e,n,i[n])}))}return e}var I=[{value:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d",label:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d"},{value:"\u041d\u0435 \u043e\u043f\u043b\u0430\u0447\u0435\u043d",label:"\u041d\u0435 \u043e\u043f\u043b\u0430\u0447\u0435\u043d"},{value:"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d \u043a\u043b\u0438\u0435\u043d\u0442\u0443",label:"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d \u043a\u043b\u0438\u0435\u043d\u0442\u0443"}];function W(){var e=window.location.pathname.replace("/fines/details/",""),n=(0,Z.$)().t,i=(0,b.a)().user,a=(0,l.useState)(null),c=a[0],r=a[1],O=(0,l.useState)(null),W=(O[0],O[1]),T=(0,l.useState)(null),E=T[0],S=T[1],A=(0,l.useState)(null),L=A[0],N=A[1],B=(0,l.useState)(null),D=B[0],F=B[1];(0,l.useEffect)((function(){(null===i||void 0===i?void 0:i.company_id)&&((0,y.t)("fines",null===i||void 0===i?void 0:i.company_id,"id",e).then(r),(0,y.Ac)(null===i||void 0===i?void 0:i.company_id).then(S),(0,y.xF)(null===i||void 0===i?void 0:i.company_id).then(N),(0,y.nD)(null===i||void 0===i?void 0:i.company_id).then(F))}),[i]);var R=k({},Object.assign({},c)[0]),M=(0,l.useRef)(null),X=function(e){C.Z.storage().ref("".concat(null===i||void 0===i?void 0:i.company_id,"/crm/fines/").concat(R.tickets_client,"/").concat(e.name)).put(e).on("state_changed",(function(e){Math.round(e.bytesTransferred/e.totalBytes*100)}),(function(e){console.log(e)}),(function(){C.Z.storage().ref("".concat(null===i||void 0===i?void 0:i.company_id,"/crm/fines/").concat(R.tickets_client,"/")).child(e.name).getDownloadURL().then((function(e){!function(e){W(k({},R,{fine_photo:e}))}(e)}))}))};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s(),{children:(0,t.jsx)("title",{children:n("fine_view_title")})}),(0,t.jsx)(o.Z,{display:"flex",style:{marginTop:30,marginRight:50},children:(0,t.jsxs)(d.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,t.jsx)(d.ZP,{item:!0,children:(0,t.jsx)(o.Z,{style:{marginLeft:30,marginTop:5},children:(0,t.jsx)(u.Z,{variant:"h3",component:"h3",gutterBottom:!0,children:n("fine_view_title")})})}),(0,t.jsxs)(d.ZP,{item:!0,children:[(0,t.jsx)(f.Z,{sx:{mt:{xs:2,sm:0}},component:P.C,startIcon:(0,t.jsx)(p.Z,{}),href:"/fines",variant:"text",children:n("Back")}),(0,t.jsx)(f.Z,{sx:{mt:{xs:2,sm:0}},component:P.C,startIcon:(0,t.jsx)(w.Z,{}),href:"/fines",variant:"contained",style:{marginLeft:30},children:n("Save")})]})]})}),(0,t.jsx)(o.Z,{sx:{px:4},children:(0,t.jsxs)(d.ZP,{container:!0,spacing:3,children:[(0,t.jsxs)(d.ZP,{item:!0,xs:12,md:6,children:[(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(h.Z,{title:n("fine_card_title1")}),(0,t.jsx)(m.Z,{}),(0,t.jsx)(v.Z,{children:(0,t.jsxs)(d.ZP,{container:!0,spacing:3,children:[(0,t.jsx)(d.ZP,{item:!0,xs:4,md:4,children:(0,t.jsx)(_.Z,{select:!0,fullWidth:!0,label:n("fine_client"),value:(null===R||void 0===R?void 0:R.fine_client)||"",onChange:function(e){var n=E.findIndex((function(n){return n.client_surname+" "+n.client_name===e.target.value}));-1!==n&&W(k({},R,{fine_client:e.target.value,client_id:E[n].client_uid,fine_client_id:E[n].id}))},variant:"outlined",children:null===E||void 0===E?void 0:E.map((function(e){return(0,t.jsx)(j.Z,{value:e.client_surname+" "+e.client_name,children:e.client_surname+" "+e.client_name},e.client_name)}))})}),(0,t.jsx)(d.ZP,{item:!0,xs:4,md:4,children:(0,t.jsx)(_.Z,{select:!0,fullWidth:!0,label:n("fine_car"),value:(null===R||void 0===R?void 0:R.fine_car)||"",onChange:function(e){var n=L.findIndex((function(n){return n.avto_Model===e.target.value}));-1!==n&&W(k({},R,{fine_car:e.target.value,fine_car_license_plate:L[n].car_license_plate}))},variant:"outlined",children:null===L||void 0===L?void 0:L.map((function(e){return(0,t.jsx)(j.Z,{value:e.car_model_full,children:e.car_model_full},e.car_model_full)}))})}),(0,t.jsx)(d.ZP,{item:!0,xs:4,md:4,children:(0,t.jsx)(_.Z,{select:!0,fullWidth:!0,label:n("fine_contract"),value:(null===R||void 0===R?void 0:R.fine_contract)||"",onChange:function(e){W(k({},R,{fine_contract:e.target.value}))},variant:"outlined",children:null===D||void 0===D?void 0:D.map((function(e){return(0,t.jsx)(j.Z,{value:e.contract_number,children:e.contract_number},e.contract_number)}))})}),(0,t.jsx)(d.ZP,{item:!0,xs:12,md:6,children:(0,t.jsx)(_.Z,{value:(null===R||void 0===R?void 0:R.fine_date)||"",onChange:function(e){W(k({},R,{fine_date:e.target.value}))},fullWidth:!0,label:n("fine_date"),variant:"outlined"})}),(0,t.jsx)(d.ZP,{item:!0,xs:12,md:6,children:(0,t.jsx)(_.Z,{value:(null===R||void 0===R?void 0:R.fine_time)||"",onChange:function(e){W(k({},R,{fine_time:e.target.value}))},fullWidth:!0,label:n("fine_time"),variant:"outlined"})})]})})]}),(0,t.jsxs)(x.Z,{style:{marginTop:30},children:[(0,t.jsx)(h.Z,{title:n("fine_card_title2")}),(0,t.jsx)(m.Z,{}),(0,t.jsx)(v.Z,{children:(0,t.jsxs)(d.ZP,{container:!0,spacing:3,children:[(0,t.jsx)(d.ZP,{item:!0,xs:12,md:12,children:(0,t.jsx)(_.Z,{value:(null===R||void 0===R?void 0:R.fine_number)||"",onChange:function(e){W(k({},R,{fine_number:e.target.value}))},fullWidth:!0,label:n("fine_number"),variant:"outlined"})}),(0,t.jsx)(d.ZP,{item:!0,xs:12,md:12,children:(0,t.jsx)(_.Z,{value:(null===R||void 0===R?void 0:R.fine_type_of_violation)||"",onChange:function(e){W(k({},R,{fine_type_of_violation:e.target.value}))},fullWidth:!0,label:n("fine_type_of_violation"),variant:"outlined"})}),(0,t.jsx)(d.ZP,{item:!0,xs:12,md:12,children:(0,t.jsx)(_.Z,{value:(null===R||void 0===R?void 0:R.fine_place)||"",onChange:function(e){W(k({},R,{fine_place:e.target.value}))},fullWidth:!0,label:n("fine_place"),variant:"outlined"})}),(0,t.jsxs)(d.ZP,{container:!0,spacing:3,style:{marginTop:20,marginLeft:20},children:[(0,t.jsx)(d.ZP,{item:!0,xs:12,md:12,children:(0,t.jsxs)(d.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,t.jsx)(d.ZP,{item:!0,xs:12,lg:4,children:(0,t.jsx)(g.Z,{sx:{textAlign:{xs:"left",sm:"left"}},children:n("fine_uploaded_to_service")})}),(0,t.jsx)(d.ZP,{item:!0,xs:12,md:4,children:(0,t.jsx)(g.Z,{sx:{textAlign:{xs:"left",sm:"left"}},children:"01.06.2022"})})]})}),(0,t.jsx)(d.ZP,{item:!0,xs:12,md:12,children:(0,t.jsxs)(d.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,t.jsx)(d.ZP,{item:!0,xs:12,lg:4,children:(0,t.jsx)(g.Z,{sx:{textAlign:{xs:"left",sm:"left"}},children:n("fine_pay_before")})}),(0,t.jsx)(d.ZP,{item:!0,xs:12,md:4,children:(0,t.jsx)(g.Z,{sx:{textAlign:{xs:"left",sm:"left"}},children:"27.08.2022"})})]})})]})]})})]})]}),(0,t.jsxs)(d.ZP,{item:!0,xs:6,md:6,style:{marginTop:20},children:[(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(h.Z,{title:n("fine_photo")}),(0,t.jsx)(m.Z,{}),(0,t.jsxs)(v.Z,{children:[(0,t.jsx)("div",{style:{width:"100%",height:"100%"},onClick:function(){M.current.click()},children:(0,t.jsx)("img",{alt:"",src:(null===R||void 0===R?void 0:R.fine_photo)||"https://www.aluminati.net/wp-content/uploads/2016/03/img-placeholder.png",style:{width:"100%",height:"100%",minHeight:150,objectFit:"cover"}})}),(0,t.jsx)("input",{type:"file",onChange:function(e){return X(e.target.files[0])},style:{width:.1,height:.1,opacity:0,pointerEvents:"none"},ref:M})]})]}),(0,t.jsxs)(d.ZP,{container:!0,spacing:3,style:{marginTop:20,marginLeft:20},children:[(0,t.jsx)(d.ZP,{item:!0,xs:12,md:12,children:(0,t.jsxs)(d.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,t.jsx)(d.ZP,{item:!0,xs:12,lg:4,children:(0,t.jsx)(g.Z,{sx:{textAlign:{xs:"left",sm:"left"}},children:n("fine_status")})}),(0,t.jsx)(d.ZP,{item:!0,xs:12,md:4,children:(0,t.jsx)(_.Z,{select:!0,fullWidth:!0,value:(null===R||void 0===R?void 0:R.fine_status)||"",onChange:function(e){W(k({},R,{fine_status:e.target.value}))},variant:"outlined",children:I.map((function(e){return(0,t.jsx)(j.Z,{value:e.value,children:e.value},e.value)}))})})]})}),(0,t.jsx)(d.ZP,{item:!0,xs:12,md:12,sx:{pb:20},children:(0,t.jsxs)(d.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,t.jsx)(d.ZP,{item:!0,xs:12,lg:4,children:(0,t.jsx)(g.Z,{sx:{textAlign:{xs:"left",sm:"left"}},children:n("fine_summa")})}),(0,t.jsx)(d.ZP,{item:!0,xs:12,md:4,children:(0,t.jsx)(_.Z,{value:null===R||void 0===R?void 0:R.fine_summa,onChange:function(e){W(k({},R,{fine_summa:e.target.value}))},fullWidth:!0})})]})})]})]})]})})]})}W.getLayout=function(e){return(0,t.jsx)(r._,{children:(0,t.jsx)(c.Z,{children:e})})},n.default=W}},function(e){e.O(0,[5006,9990,5360,6827,3970,5464,6668,2945,1849,8991,8630,990,3274,889,5974,8922,2628,6541,8251,5063,6505,9355,8035,1341,9774,2888,179],(function(){return n=22745,e(e.s=n);var n}));var n=e.O();_N_E=n}]);
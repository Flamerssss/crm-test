(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2651],{3175:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/maintenance/EditorBody",function(){return t(86786)}])},86786:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return $}});var i=t(85893),r=t(67294),a=t(86886),l=t(87357),c=t(50135),o=t(83321),s=t(66242),d=t(78445),u=t(67720),m=t(44267),x=t(5306),h=t(18972),v=(t(15063),t(77058)),p=t(46747),j=t(64666),f=t(15861),_=t(72882),Z=t(7906),g=t(53184),b=t(53816),y=t(53252),P=t(295),C=t(26447),k=t(75920),S=t(71341),I=t(97029);function w(n){var e=n.open,t=n.onClose,c=n.onSelect,o=(0,v.$)().t,s=(0,k.a)().user,d=(0,r.useState)(null),u=d[0],m=d[1];return(0,r.useEffect)((function(){(null===s||void 0===s?void 0:s.company_id)&&(0,S.qt)(null===s||void 0===s?void 0:s.company_id).then(m)}),[s]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(j.Z,{maxWidth:"xl",open:e,onClose:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",sx:{p:3},children:(0,i.jsx)(l.Z,{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",p:5,children:(0,i.jsx)(a.ZP,{container:!0,spacing:2,alignItems:"center",children:(0,i.jsxs)(a.ZP,{item:!0,xs:12,sm:12,lg:12,sx:{pt:{xs:2,sm:"0 !important"}},children:[(0,i.jsx)(f.Z,{variant:"h4",children:o("maintenance_spare_parts_title")}),(0,i.jsx)(a.ZP,{children:(0,i.jsx)(_.Z,{children:(0,i.jsxs)(Z.Z,{children:[(0,i.jsx)(g.Z,{children:(0,i.jsxs)(b.Z,{children:[(0,i.jsx)(y.Z,{sx:{pl:3},children:o("maintenance_spare_parts_title")}),(0,i.jsx)(y.Z,{children:o("maintenance_price_title")}),(0,i.jsx)(y.Z,{children:o("maintenance_comment")}),(0,i.jsx)(y.Z,{children:o("action")})]})}),(0,i.jsx)(P.Z,{children:u&&u.map((function(n,e){return(0,i.jsxs)(b.Z,{hover:!0,onClick:function(){t(),c(n)},children:[(0,i.jsx)(y.Z,{children:n.nomenclature_name}),(0,i.jsx)(y.Z,{children:n.nomenclature_price}),(0,i.jsx)(y.Z,{children:n.nomenclature_comment}),(0,i.jsx)(y.Z,{align:"left",sx:{pr:3},children:(0,i.jsx)(C.Z,{direction:"row",justifyContent:"left",alignItems:"left",children:(0,i.jsx)(I.Z,{collection:"repairsSklad",document:null===n||void 0===n?void 0:n.id})})})]},e)}))})]})})})]})})})})})}function D(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function O(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function W(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},i=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),i.forEach((function(e){O(n,e,t[e])}))}return n}function T(n){return function(n){if(Array.isArray(n))return D(n)}(n)||function(n){if("undefined"!==typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,e){if(!n)return;if("string"===typeof n)return D(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return D(n,e)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var E=[{value:"\u0420\u0435\u043c\u043e\u043d\u0442",label:"\u0420\u0435\u043c\u043e\u043d\u0442"},{value:"\u0422\u041e",label:"\u0422\u041e"},{value:"\u0414\u0422\u041f",label:"\u0414\u0422\u041f"}],N=[{value:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d\u043e",label:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d\u043e"},{value:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435",label:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"},{value:"\u0423\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0439",label:"\u0423\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0439"}];function A(n){var e=n.selectedRepair,t=n.setData,s=n.onDelete,d=(0,r.useState)(!1),u=d[0],m=d[1],x=(0,v.$)().t;return(0,i.jsxs)(a.ZP,{container:!0,spacing:1,style:{marginTop:15,marginLeft:15},children:[(0,i.jsx)(w,{onSelect:function(n){return t(n)},open:u,onClose:function(){return m(!1)}}),(0,i.jsxs)(a.ZP,{item:!0,xs:12,md:6,children:[(0,i.jsx)(l.Z,{pb:1,children:(0,i.jsx)("b",{children:x("maintenance_spare_part_title")})}),(0,i.jsx)(a.ZP,{item:!0,xs:12,md:12,children:(0,i.jsx)(c.Z,{value:null===e||void 0===e?void 0:e.nomenclature_name,onClick:function(){return m(!0)},fullWidth:!0,variant:"outlined"})})]}),(0,i.jsxs)(a.ZP,{item:!0,xs:12,sm:3,children:[(0,i.jsx)(l.Z,{pb:1,children:(0,i.jsx)("b",{children:x("maintenance_price_title")})}),(0,i.jsx)(c.Z,{value:(null===e||void 0===e?void 0:e.nomenclature_price)||"",onChange:function(n){return t(W({},e,{nomenclature_price:n.target.value}))},fullWidth:!0,variant:"outlined"})]}),(0,i.jsxs)(a.ZP,{item:!0,xs:12,sm:2,children:[(0,i.jsx)(l.Z,{pb:1,children:(0,i.jsx)("b",{children:x("maintenance_count_title")})}),(0,i.jsx)(c.Z,{type:"number",InputLabelProps:{shrink:!0},value:null===e||void 0===e?void 0:e.nomenclature_count,onChange:function(n){if(e&&e.nomenclature_price){var i=Number(n.target.value);console.log("got value",i,W({},e,{nomenclature_count:i})),!i||i<0||t(W({},e,{nomenclature_count:n.target.value,nomenclature_price:Number(e.nomenclature_price)*Number(i)}))}},variant:"outlined",defaultValue:"1"})]}),(0,i.jsx)(a.ZP,{item:!0,xs:1,md:1,style:{marginTop:34},children:(0,i.jsx)("div",{hidden:!s,children:(0,i.jsx)(o.Z,{onClick:s,variant:"contained",color:"error",children:x("Delete")})})})]})}var $=function(n){var e=n.initialData,t=n.setData,o=n.allCars,j=n.counterparties,f=n.carDamage,_=(0,v.$)().t,Z=(0,r.useState)({})[0],g=(0,r.useState)([]),b=g[0],y=g[1],P=(0,r.useState)(!1),C=P[0],k=P[1];return(0,i.jsxs)(a.ZP,{container:!0,spacing:3,style:{marginTop:20},children:[(0,i.jsx)(w,{onSelect:function(n){return Z(W({},n))},open:C,onClose:function(){return k(!1)}}),(0,i.jsx)(a.ZP,{item:!0,xs:12,lg:6,children:(0,i.jsxs)(s.Z,{children:[(0,i.jsx)(d.Z,{title:_("maintenance_description_title")}),(0,i.jsx)(u.Z,{}),(0,i.jsx)(m.Z,{children:(0,i.jsxs)(a.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,i.jsx)(a.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(x.Z,{sx:{m:0},limitTags:1,options:o,value:null===e||void 0===e?void 0:e.maintenance_car,getOptionLabel:function(n){return n.car_model},onChange:function(n,i){t(W({},e,{maintenance_car:null===i||void 0===i?void 0:i.car_model,maintenance_car_id:null===i||void 0===i?void 0:i.id}))},renderInput:function(n){return(0,i.jsx)(c.Z,W({},n,{fullWidth:!0,variant:"outlined",placeholder:_("maintenance_car")}))}})}),(0,i.jsx)(a.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(a.ZP,{item:!0,xs:12,md:8,children:(0,i.jsxs)(a.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,i.jsx)(a.ZP,{item:!0,xs:12,md:4,children:(0,i.jsx)(l.Z,{pb:1,children:(0,i.jsx)("b",{children:_("maintenance_mileage")})})}),(0,i.jsx)(a.ZP,{item:!0,xs:12,md:8,children:(0,i.jsx)(c.Z,{value:(null===e||void 0===e?void 0:e.maintenance_mileage)||"",onChange:function(n){t(W({},e,{maintenance_mileage:n.target.value}))},fullWidth:!0,variant:"outlined"})})]})})}),(0,i.jsx)(a.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(p.M,{value:(null===e||void 0===e?void 0:e.maintenance_data)||"",onChange:function(n){t(W({},e,{maintenance_data:n}))},renderInput:function(n){return(0,i.jsx)(c.Z,W({fullWidth:!0,placeholder:_("select_date")},n))}})}),(0,i.jsx)(a.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(c.Z,{select:!0,fullWidth:!0,label:_("maintenance_job_type"),value:(null===e||void 0===e?void 0:e.maintenance_job_type)||"",onChange:function(n){t(W({},e,{maintenance_job_type:n.target.value}))},variant:"outlined",children:E.map((function(n){return(0,i.jsx)(h.Z,{value:n.value,children:n.label},n.value)}))})}),(0,i.jsx)(a.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(x.Z,{sx:{m:0},limitTags:1,options:j,value:null===e||void 0===e?void 0:e.maintenance_provider,getOptionLabel:function(n){return n.counterparties_company},onChange:function(n,i){t(W({},e,{maintenance_provider:null===i||void 0===i?void 0:i.counterparties_company,maintenance_provider_id:null===i||void 0===i?void 0:i.id}))},renderInput:function(n){return(0,i.jsx)(c.Z,W({},n,{fullWidth:!0,variant:"outlined",placeholder:_("maintenance_car")}))}})}),(0,i.jsx)(a.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(c.Z,{select:!0,fullWidth:!0,label:_("maintenance_status"),value:(null===e||void 0===e?void 0:e.maintenance_status)||"",onChange:function(n){t(W({},e,{maintenance_status:n.target.value}))},variant:"outlined",children:N.map((function(n){return(0,i.jsx)(h.Z,{value:n.value,children:n.label},n.value)}))})}),(0,i.jsx)(a.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(c.Z,{select:!0,fullWidth:!0,label:_("maintenance_damage_type"),value:(null===e||void 0===e?void 0:e.maintenance_damage_type)||"",onChange:function(n){var i=f.findIndex((function(e){return e.id===n.target.value}));t(W({},e,{maintenance_damage_type:f[i].damage_type,maintenance_damage_areaId:f[i].areaId,maintenance_damage_part_id:n.target.value}))},variant:"outlined",children:null===f||void 0===f?void 0:f.map((function(n){return(0,i.jsx)(h.Z,{value:n.id,children:n.damage_type},n.id)}))})})]})})]})}),(0,i.jsx)(a.ZP,{item:!0,xs:12,md:6,children:(0,i.jsxs)(s.Z,{children:[(0,i.jsx)(d.Z,{title:_("maintenance_description_title")}),(0,i.jsx)(u.Z,{}),(0,i.jsx)(m.Z,{children:(0,i.jsx)(a.ZP,{container:!0,spacing:3,children:(0,i.jsx)(a.ZP,{item:!0,xs:12,md:8,children:(0,i.jsxs)(a.ZP,{container:!0,spacing:2,alignItems:"center",children:[b.map((function(n,e){return(0,i.jsx)(A,{selectedRepair:n,setData:function(n){console.log("part",n),b[e]=n,y(T(b))},onDelete:function(){var n=[].concat(b);n.splice(e,1),y(n)}},e)})),(0,i.jsx)(A,{setData:function(n){var e=[].concat(b);e.push(W({},n,{nomenclature_count:1})),y(e)}}),(0,i.jsx)(a.ZP,{item:!0,xs:12,md:6,children:(0,i.jsxs)(l.Z,{pb:1,children:[(0,i.jsx)("b",{children:_("maintenance_job_and_price")})," :"]})}),(0,i.jsx)(a.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(c.Z,{multiline:!0,rows:5,value:(null===e||void 0===e?void 0:e.maintenance_job_and_price)||"",onChange:function(n){t(W({},e,{maintenance_job_and_price:n.target.value}))},fullWidth:!0,variant:"outlined"})}),(0,i.jsx)(a.ZP,{item:!0,xs:12,md:6,children:(0,i.jsxs)(l.Z,{pb:1,children:[(0,i.jsx)("b",{children:_("maintenance_result_diagnistic")})," :"]})}),(0,i.jsx)(a.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(c.Z,{multiline:!0,rows:5,value:(null===e||void 0===e?void 0:e.maintenance_result_diagnistic)||"",onChange:function(n){t(W({},e,{maintenance_result_diagnistic:n.target.value}))},fullWidth:!0,variant:"outlined"})}),(0,i.jsx)(a.ZP,{item:!0,xs:12,md:6,children:(0,i.jsxs)(l.Z,{pb:1,children:[(0,i.jsx)("b",{children:_("maintenance_repairs_price")})," :"]})}),(0,i.jsx)(a.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(c.Z,{value:(null===e||void 0===e?void 0:e.maintenance_repairs_price)||"",onChange:function(n){t(W({},e,{maintenance_repairs_price:n.target.value}))},fullWidth:!0,variant:"outlined"})}),(0,i.jsx)(a.ZP,{item:!0,xs:12,md:6,children:(0,i.jsxs)(l.Z,{pb:1,children:[(0,i.jsx)("b",{children:_("maintenance_job_price")})," :"]})}),(0,i.jsx)(a.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(c.Z,{value:(null===e||void 0===e?void 0:e.maintenance_job_price)||"",onChange:function(n){t(W({},e,{maintenance_job_price:n.target.value}))},fullWidth:!0,variant:"outlined"})})]})})})})]})})]})}},75920:function(n,e,t){"use strict";t.d(e,{a:function(){return a}});var i=t(67294),r=t(40517),a=function(){return(0,i.useContext)(r.Vo)}},97029:function(n,e,t){"use strict";t.d(e,{Z:function(){return g}});var i=t(85893),r=t(67294),a=t(90948),l=t(87952),c=t(83321),o=t(6585),s=t(93946),d=t(64666),u=t(87357),m=t(15861),x=t(52521),h=t(50594),v=t(77058),p=t(75920),j=t(73400),f=t(1902),_=(t(96621),(0,a.ZP)(l.Z)((function(n){var e=n.theme;return"\n      background-color: ".concat(e.colors.error.lighter,";\n      color: ").concat(e.colors.error.main,";\n      width: ").concat(e.spacing(12),";\n      height: ").concat(e.spacing(12),";\n\n      .MuiSvgIcon-root {\n        font-size: ").concat(e.typography.pxToRem(45),";\n      }\n")}))),Z=(0,a.ZP)(c.Z)((function(n){var e=n.theme;return"\n     background: ".concat(e.colors.error.main,";\n     color: ").concat(e.palette.error.contrastText,";\n\n     &:hover {\n        background: ").concat(e.colors.error.dark,";\n     }\n    ")}));function g(n){var e=n.collection,t=n.document,a=(0,v.$)().t,l=(0,r.useState)(!1),g=l[0],b=l[1],y=(0,j.Ds)().enqueueSnackbar,P=(0,p.a)().user,C=function(){b(!1)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.Z,{onClick:function(){b(!0)},color:"error",children:(0,i.jsx)(x.Z,{})}),(0,i.jsx)(d.Z,{open:g,onClose:C,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",sx:{p:3},children:(0,i.jsxs)(u.Z,{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",p:5,children:[(0,i.jsx)(_,{children:(0,i.jsx)(h.Z,{})}),(0,i.jsxs)(m.Z,{align:"center",sx:{py:4,px:6},variant:"h3",children:[a("ConfirmDelete_title"),a("ConfirmDelete_body")]}),(0,i.jsxs)(u.Z,{children:[(0,i.jsx)(c.Z,{variant:"text",size:"large",sx:{mx:1},onClick:C,children:a("Back")}),(0,i.jsx)(Z,{onClick:function(){var n;n=t,f.Z.firestore().collection(null===P||void 0===P?void 0:P.company_id).doc("company").collection(e).doc(null===n||void 0===n?void 0:n.id).delete(),y(a("Deleted"),{variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"},TransitionComponent:o.Z}),C()},size:"large",sx:{mx:1,px:3},variant:"contained",children:a("Delete")})]})]})})]})}}},function(n){n.O(0,[9990,5360,6827,3970,5464,6668,2945,1849,8991,2453,5063,7104,5350,5306,6747,1820,1341,9774,2888,179],(function(){return e=3175,n(n.s=e);var e}));var e=n.O();_N_E=e}]);
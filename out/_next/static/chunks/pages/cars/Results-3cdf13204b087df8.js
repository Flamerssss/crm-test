(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4950],{88174:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cars/Results",function(){return r(34226)}])},34226:function(e,n,r){"use strict";r.r(n);var t=r(85893),o=r(67294),l=r(90948),i=r(66242),c=r(37023),a=r(53184),s=r(53816),d=r(53252),u=r(26280),h=r(87357),f=r(40044),x=r(33454),v=r(96420),p=r(50135),g=r(87109),m=r(67720),j=r(15861),b=r(72882),y=r(7906),Z=r(295),w=r(87952),_=r(21023),P=r(93946),O=r(47171),k=r(86886),C=r(68586),S=r(77058),I=r(86010),N=r(99586),R=r(80100),D=r(42701),E=r(56344),A=r(43743),z=r(82864),F=r(97029);function T(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function B(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){T(e,n,r[n])}))}return e}var M=(0,l.ZP)(i.Z)((function(e){var n=e.theme;return"\n\n  position: relative;\n  overflow: visible;\n\n  &::after {\n    content: '';\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    border-radius: inherit;\n    z-index: 1;\n    transition: ".concat(n.transitions.create(["box-shadow"]),";\n  }\n      \n    &.Mui-selected::after {\n      box-shadow: 0 0 0 3px ").concat(n.colors.primary.main,";\n    }\n  ")})),W=(0,l.ZP)(c.Z)((function(e){var n=e.theme;return"\n    @media (max-width: ".concat(n.breakpoints.values.md,"px) {\n      .MuiTabs-scrollableX {\n        overflow-x: auto !important;\n      }\n\n      .MuiTabs-indicator {\n          box-shadow: none;\n      }\n    }\n    ")}));function L(e,n,r){return n[r]<e[r]?-1:n[r]>e[r]?1:0}function q(e,n){return"desc"===e?function(e,r){return L(e,r,n)}:function(e,r){return-L(e,r,n)}}function X(e,n){console.log("array",e);var r=null===e||void 0===e?void 0:e.map((function(e,n){return[e,n]}));return null===r||void 0===r||r.sort((function(e,r){var t=n(e[0],r[0]);return 0!==t?t:e[1]-r[1]})),null===r||void 0===r?void 0:r.map((function(e){return e[0]}))}function $(e){var n=(0,S.$)().t,r=e.order,o=e.orderBy,l=e.onRequestSort,i=[{id:"car_model_full",numeric:!1,label:"".concat(n("car_model_full")," / ").concat(n("car_license_plate")),align:"left"},{id:"car_class",numeric:!1,label:n("car_class"),align:"left"},{id:"car_\u0441ategory",numeric:!1,label:n("car_\u0441ategory"),align:"center"},{id:"car_year_issue",numeric:!0,label:n("car_year_issue"),align:"left"},{id:"car_owner",numeric:!1,label:n("car_owner"),align:"left"},{id:"car_vin",numeric:!1,label:n("car_vin"),align:"left"},{id:"car_location",numeric:!1,label:n("car_location"),align:"left"},{id:"car_status",numeric:!1,label:n("car_status"),align:"left"}];return(0,t.jsx)(a.Z,{children:(0,t.jsxs)(s.Z,{children:[i.map((function(e){return(0,t.jsx)(d.Z,{sortDirection:o===e.id&&r,children:(0,t.jsx)(u.Z,{active:o===e.id,direction:o===e.id?r:"asc",onClick:(n=e.id,function(e){l(e,n)}),children:e.label})},e.id);var n})),(0,t.jsx)(d.Z,{sortDirection:!1,align:"center",children:n("Actions")})]})})}var V=function(e,n,r,o,l){var i={Available:{text:n,color:"success"},Inservice:{text:r,color:"error"},Booked:{text:o,color:"info"},InRent:{text:l,color:"warning"}}[e],c=i.text,a=i.color;return(0,t.jsx)(R.Z,{color:a,children:c})};n.default=function(e){var n,r,l=e.cars,c=e.fleets,a=(0,o.useState)([]),u=a[0],R=a[1],T=(0,S.$)().t,L=(0,o.useState)(0),H=L[0],G=L[1],J=(0,o.useState)(10),K=J[0],Q=J[1],U=(0,o.useState)(""),Y=U[0],ee=U[1],ne=(0,o.useState)({id:null}),re=ne[0],te=ne[1];(0,o.useEffect)((function(){c&&te((function(e){var n;return B({},e,{id:null===(n=c[0])||void 0===n?void 0:n.id})}))}),[c]);var oe=function(e){e.persist(),ee(e.target.value)},le=function(e,n){G(n)},ie=function(e){Q(parseInt(e.target.value))},ce=function(e,n,r){return null===e||void 0===e?void 0:e.filter((function(e){var t=!0;if(n){var o=!1;["car_model_full","car_\u0441ategory","car_owner","car_vin","car_status"].forEach((function(r){var t;(null===(t=e[r])||void 0===t?void 0:t.toLowerCase().includes(n.toLowerCase()))&&(o=!0)})),e.car_fleet_id!==r.id&&(t=!1),o||(t=!1)}return Object.keys(r).forEach((function(n){r[n]!==e.car_fleet_id&&(t=!1)})),t}))}(l,Y,re),ae=u.length>0,se=(0,o.useState)("table_view"),de=se[0],ue=se[1],he=(0,o.useState)("asc"),fe=he[0],xe=he[1],ve=(0,o.useState)("data"),pe=ve[0],ge=ve[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(h.Z,{display:"flex",alignItems:"center",flexDirection:{xs:"column",sm:"row"},justifyContent:{xs:"center",sm:"space-between"},pb:3,children:[(0,t.jsx)(W,{onChange:function(e,n){var r;r=n,te((function(e){return B({},e,{id:r})})),R([])},scrollButtons:"auto",textColor:"secondary",value:re.id,variant:"scrollable",children:null===c||void 0===c?void 0:c.map((function(e){return(0,t.jsx)(f.Z,{value:e.id,label:e.fleet_title},e.id)}))}),(0,t.jsxs)(x.Z,{sx:{mt:{xs:2,sm:0}},value:de,exclusive:!0,onChange:function(e,n){ue(n)},children:[(0,t.jsx)(v.Z,{disableRipple:!0,value:"table_view",children:(0,t.jsx)(A.Z,{})}),(0,t.jsx)(v.Z,{disableRipple:!0,value:"grid_view",children:(0,t.jsx)(E.Z,{})})]})]}),"table_view"===de&&(0,t.jsxs)(i.Z,{children:[(0,t.jsxs)(h.Z,{p:2,children:[!ae&&(0,t.jsx)(p.Z,{sx:{m:0},InputProps:{startAdornment:(0,t.jsx)(g.Z,{position:"start",children:(0,t.jsx)(D.Z,{})})},onChange:oe,placeholder:T("placeholderSearch"),value:Y,size:"small",fullWidth:!0,margin:"normal",variant:"outlined"}),ae]}),(0,t.jsx)(m.Z,{}),0===(null===ce||void 0===ce?void 0:ce.length)?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(j.Z,{sx:{py:10},variant:"h3",fontWeight:"normal",color:"text.secondary",align:"center",children:T("placeholderSearchNotFound")})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b.Z,{children:(0,t.jsxs)(y.Z,{children:[(0,t.jsx)($,{order:fe,orderBy:pe,onRequestSort:function(e,n){xe(pe===n&&"asc"===fe?"desc":"asc"),ge(n)},rowCount:null===ce||void 0===ce?void 0:ce.length}),(0,t.jsx)(Z.Z,{children:null===(r=null===(n=X(ce,q(fe,pe)))||void 0===n?void 0:n.slice(H*K,H*K+K))||void 0===r?void 0:r.map((function(e){var n=u.includes(null===e||void 0===e?void 0:e.id);return(0,t.jsxs)(s.Z,{hover:!0,selected:n,children:[(0,t.jsx)(d.Z,{children:(0,t.jsxs)(h.Z,{display:"flex",alignItems:"center",children:[(0,t.jsx)(w.Z,{sx:{mr:1},src:null===e||void 0===e?void 0:e.car_image}),(0,t.jsxs)(h.Z,{children:[(0,t.jsx)(C.C,{variant:"h5",href:"/cars/profile/"+(null===e||void 0===e?void 0:e.id),children:null===e||void 0===e?void 0:e.car_model_full}),(0,t.jsx)(j.Z,{noWrap:!0,variant:"subtitle2",children:null===e||void 0===e?void 0:e.car_license_plate})]})]})}),(0,t.jsx)(d.Z,{children:(0,t.jsx)(j.Z,{children:null===e||void 0===e?void 0:e.car_class})}),(0,t.jsx)(d.Z,{children:(0,t.jsx)(j.Z,{children:null===e||void 0===e?void 0:e.car_\u0441ategory})}),(0,t.jsx)(d.Z,{align:"center",children:(0,t.jsx)(j.Z,{children:null===e||void 0===e?void 0:e.car_year_issue})}),(0,t.jsx)(d.Z,{children:(0,t.jsx)(j.Z,{children:null===e||void 0===e?void 0:e.car_owner})}),(0,t.jsx)(d.Z,{children:(0,t.jsx)(j.Z,{children:null===e||void 0===e?void 0:e.car_vin})}),(0,t.jsx)(d.Z,{children:(0,t.jsx)(j.Z,{children:null===e||void 0===e?void 0:e.car_location})}),(0,t.jsx)(d.Z,{children:V(null===e||void 0===e?void 0:e.car_status,T("Available"),T("Inservice"),T("Booked"),T("InRent"))}),(0,t.jsx)(d.Z,{align:"center",children:(0,t.jsxs)(j.Z,{noWrap:!0,children:[(0,t.jsx)(_.Z,{title:T("View"),arrow:!0,children:(0,t.jsx)(P.Z,{color:"primary",children:(0,t.jsx)(C.C,{href:"/cars/profile/"+(null===e||void 0===e?void 0:e.id),children:(0,t.jsx)(N.Z,{fontSize:"small"})})})}),(0,t.jsx)(_.Z,{title:T("Delete"),arrow:!0,children:(0,t.jsx)(F.Z,{collection:"cars",document:e.id})})]})})]},null===e||void 0===e?void 0:e.id)}))})]})}),(0,t.jsx)(h.Z,{p:2,children:(0,t.jsx)(O.Z,{component:"div",count:null===ce||void 0===ce?void 0:ce.length,onPageChange:le,onRowsPerPageChange:ie,page:H,rowsPerPage:K,labelRowsPerPage:T("RowsPerPage"),rowsPerPageOptions:[5,10,20,50]})})]})]}),"grid_view"===de&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Z,{sx:{p:2,mb:3},children:(0,t.jsxs)(h.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[0!==(null===ce||void 0===ce?void 0:ce.length)&&(0,t.jsx)(t.Fragment,{children:ae&&(0,t.jsx)(h.Z,{flex:1,pl:2})}),!ae&&(0,t.jsx)(p.Z,{sx:{my:0,ml:0!==(null===ce||void 0===ce?void 0:ce.length)?2:0},fullWidth:!0,InputProps:{startAdornment:(0,t.jsx)(g.Z,{position:"start",children:(0,t.jsx)(D.Z,{})})},onChange:oe,placeholder:T("placeholderSearch"),value:Y,size:"small",margin:"normal",variant:"outlined"})]})}),0===(null===ce||void 0===ce?void 0:ce.length)?(0,t.jsx)(j.Z,{sx:{py:10},variant:"h3",fontWeight:"normal",color:"text.secondary",align:"center",children:T("placeholderSearchNotFound")}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k.ZP,{container:!0,spacing:3,children:null===ce||void 0===ce?void 0:ce.map((function(e){var n=u.includes(e.id);return(0,t.jsx)(k.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,t.jsx)(M,{className:(0,I.Z)({"Mui-selected":n}),children:(0,t.jsxs)(h.Z,{sx:{position:"relative",zIndex:"2"},children:[(0,t.jsxs)(h.Z,{px:2,pt:2,display:"flex",alignItems:"flex-start",justifyContent:"space-between",children:[V(null===e||void 0===e?void 0:e.car_status,T("Available"),T("Inservice"),T("Booked"),T("InRent")),(0,t.jsx)(P.Z,{color:"primary",sx:{p:.5},children:(0,t.jsx)(z.Z,{})})]}),(0,t.jsxs)(h.Z,{p:2,display:"flex",alignItems:"flex-start",children:[(0,t.jsx)(w.Z,{sx:{width:50,height:50,mr:2},src:e.car_image}),(0,t.jsxs)(h.Z,{children:[(0,t.jsxs)(h.Z,{children:[(0,t.jsx)(C.C,{variant:"h5",href:"/cars/profile/"+(null===e||void 0===e?void 0:e.id),children:e.car_model_full})," ",(0,t.jsxs)(j.Z,{component:"span",variant:"body2",color:"text.secondary",children:["(",e.car_license_plate,")"]})]}),(0,t.jsx)(j.Z,{sx:{pt:.3},variant:"subtitle2",children:e.car_class}),(0,t.jsx)(j.Z,{sx:{pt:1},variant:"h6",children:e.car_\u0441ategory})]})]}),(0,t.jsx)(m.Z,{}),(0,t.jsx)(h.Z,{pl:2,py:1,pr:1,display:"flex",alignItems:"center",justifyContent:"space-between"})]})})},e.id)}))}),(0,t.jsxs)(i.Z,{sx:{p:2,mt:3,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,t.jsxs)(h.Z,{children:[(0,t.jsx)(j.Z,{component:"span",variant:"subtitle1",children:T("Showing")})," ",(0,t.jsx)("b",{children:K})," ",T("of")," ",(0,t.jsx)("b",{children:null===ce||void 0===ce?void 0:ce.length})," "]}),(0,t.jsx)(O.Z,{component:"div",count:null===ce||void 0===ce?void 0:ce.length,onPageChange:le,onRowsPerPageChange:ie,page:H,rowsPerPage:K,labelRowsPerPage:T("RowsPerPage"),rowsPerPageOptions:[5,10,20,50]})]})]})]}),!de&&(0,t.jsx)(i.Z,{sx:{textAlign:"center",p:3},children:(0,t.jsx)(j.Z,{align:"center",variant:"h4",fontWeight:"normal",color:"text.secondary",sx:{my:5},gutterBottom:!0,children:T("Choose between table or grid views for displaying the users list.")})})]})}},80100:function(e,n,r){"use strict";var t=r(85893),o=r(45697),l=r.n(o);function i(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function c(e,n){if(null==e)return{};var r,t,o=function(e,n){if(null==e)return{};var r,t,o={},l=Object.keys(e);for(t=0;t<l.length;t++)r=l[t],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(t=0;t<l.length;t++)r=l[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var a=(0,r(90948).ZP)("span")((function(e){var n=e.theme;return"\n      background-color: ".concat(n.colors.alpha.black[5],";\n      padding: ").concat(n.spacing(.5,1),";\n      font-size: ").concat(n.typography.pxToRem(13),";\n      border-radius: ").concat(n.general.borderRadius,";\n      display: inline-flex;\n      align-items: center;\n      justify-content: center;\n      max-height: ").concat(n.spacing(3),";\n      \n      &.MuiLabel {\n        &-primary {\n          background-color: ").concat(n.colors.primary.lighter,";\n          color: ").concat(n.palette.primary.main,"\n        }\n\n        &-black {\n          background-color: ").concat(n.colors.alpha.black[100],";\n          color: ").concat(n.colors.alpha.white[100],";\n        }\n        \n        &-secondary {\n          background-color: ").concat(n.colors.secondary.lighter,";\n          color: ").concat(n.palette.secondary.main,"\n        }\n        \n        &-success {\n          background-color: ").concat(n.colors.success.lighter,";\n          color: ").concat(n.palette.success.main,"\n        }\n        \n        &-warning {\n          background-color: ").concat(n.colors.warning.lighter,";\n          color: ").concat(n.palette.warning.main,"\n        }\n              \n        &-error {\n          background-color: ").concat(n.colors.error.lighter,";\n          color: ").concat(n.palette.error.main,"\n        }\n        \n        &-info {\n          background-color: ").concat(n.colors.info.lighter,";\n          color: ").concat(n.palette.info.main,"\n        }\n      }\n")})),s=function(e){e.className;var n=e.color,r=void 0===n?"secondary":n,o=e.children,l=c(e,["className","color","children"]);return(0,t.jsx)(a,function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){i(e,n,r[n])}))}return e}({className:"MuiLabel-"+r},l,{children:o}))};s.propTypes={children:l().node,className:l().string,color:l().oneOf(["primary","black","secondary","error","warning","success","info"])},n.Z=s},68586:function(e,n,r){"use strict";var t=r(85893),o=r(67294),l=r(86010),i=r(11163),c=r(41664),a=r.n(c),s=r(50122);function d(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function u(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){d(e,n,r[n])}))}return e}function h(e,n){if(null==e)return{};var r,t,o=function(e,n){if(null==e)return{};var r,t,o={},l=Object.keys(e);for(t=0;t<l.length;t++)r=l[t],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(t=0;t<l.length;t++)r=l[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var f=(0,r(90948).ZP)("a")({}),x=o.forwardRef((function(e,n){var r=e.to,o=e.linkAs,l=e.replace,i=e.scroll,c=e.shallow,s=e.prefetch,d=e.locale,x=h(e,["to","linkAs","replace","scroll","shallow","prefetch","locale"]);return(0,t.jsx)(a(),{href:r,prefetch:s,as:o,replace:l,scroll:i,shallow:c,passHref:!0,locale:d,children:(0,t.jsx)(f,u({ref:n},x))})})),v=o.forwardRef((function(e,n){var r=e.activeClassName,o=void 0===r?"active":r,c=e.as,a=e.className,v=e.href,p=e.linkAs,g=e.locale,m=e.noLinkStyle,j=e.prefetch,b=e.replace,y=(e.role,e.scroll),Z=e.shallow,w=h(e,["activeClassName","as","className","href","linkAs","locale","noLinkStyle","prefetch","replace","role","scroll","shallow"]),_=(0,i.useRouter)(),P="string"===typeof v?v:v.pathname,O=(0,l.Z)(a,d({},o,_.pathname===P&&o));if("string"===typeof v&&(0===v.indexOf("http")||0===v.indexOf("mailto:")))return m?(0,t.jsx)(f,u({className:O,href:v,ref:n},w)):(0,t.jsx)(s.Z,u({className:O,href:v,ref:n},w));var k={to:v,linkAs:p||c,replace:b,scroll:y,shallow:Z,prefetch:j,locale:g};return m?(0,t.jsx)(x,u({className:O,ref:n},k,w)):(0,t.jsx)(s.Z,u({component:x,className:O,ref:n},k,w))}));n.C=v},75920:function(e,n,r){"use strict";r.d(n,{a:function(){return l}});var t=r(67294),o=r(40517),l=function(){return(0,t.useContext)(o.Vo)}},97029:function(e,n,r){"use strict";r.d(n,{Z:function(){return y}});var t=r(85893),o=r(67294),l=r(90948),i=r(87952),c=r(83321),a=r(6585),s=r(93946),d=r(64666),u=r(87357),h=r(15861),f=r(52521),x=r(50594),v=r(77058),p=r(75920),g=r(73400),m=r(1902),j=(r(96621),(0,l.ZP)(i.Z)((function(e){var n=e.theme;return"\n      background-color: ".concat(n.colors.error.lighter,";\n      color: ").concat(n.colors.error.main,";\n      width: ").concat(n.spacing(12),";\n      height: ").concat(n.spacing(12),";\n\n      .MuiSvgIcon-root {\n        font-size: ").concat(n.typography.pxToRem(45),";\n      }\n")}))),b=(0,l.ZP)(c.Z)((function(e){var n=e.theme;return"\n     background: ".concat(n.colors.error.main,";\n     color: ").concat(n.palette.error.contrastText,";\n\n     &:hover {\n        background: ").concat(n.colors.error.dark,";\n     }\n    ")}));function y(e){var n=e.collection,r=e.document,l=(0,v.$)().t,i=(0,o.useState)(!1),y=i[0],Z=i[1],w=(0,g.Ds)().enqueueSnackbar,_=(0,p.a)().user,P=function(){Z(!1)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.Z,{onClick:function(){Z(!0)},color:"error",children:(0,t.jsx)(f.Z,{})}),(0,t.jsx)(d.Z,{open:y,onClose:P,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",sx:{p:3},children:(0,t.jsxs)(u.Z,{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",p:5,children:[(0,t.jsx)(j,{children:(0,t.jsx)(x.Z,{})}),(0,t.jsxs)(h.Z,{align:"center",sx:{py:4,px:6},variant:"h3",children:[l("ConfirmDelete_title"),l("ConfirmDelete_body")]}),(0,t.jsxs)(u.Z,{children:[(0,t.jsx)(c.Z,{variant:"text",size:"large",sx:{mx:1},onClick:P,children:l("Back")}),(0,t.jsx)(b,{onClick:function(){var e;e=r,m.Z.firestore().collection(null===_||void 0===_?void 0:_.company_id).doc("company").collection(n).doc(null===e||void 0===e?void 0:e.id).delete(),w(l("Deleted"),{variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"},TransitionComponent:a.Z}),P()},size:"large",sx:{mx:1,px:3},variant:"contained",children:l("Delete")})]})]})})]})}}},function(e){e.O(0,[9990,5360,6827,3970,5464,6668,2945,1849,8991,8630,990,3274,2453,7171,8785,7573,7390,9774,2888,179],(function(){return n=88174,e(e.s=n);var n}));var n=e.O();_N_E=n}]);
"use strict"; (self.webpackChunk_N_E = self.webpackChunk_N_E || []).push([[9306], { 79306: function (e, n, t) { t.r(n); var r = t(85893), a = t(67294), o = t(90948), i = t(37023), c = t(66242), l = t(78445), u = t(67720), s = t(44267), d = t(87357), f = t(86886), h = t(40044), m = t(77058), p = t(84996), g = t(26817), v = t(70106), x = t(12908), y = (0, o.ZP)(i.Z)((function () { return "\n    .MuiTabs-scrollableX {\n      overflow-x: auto !important;\n    }\n" })); n.default = function (e) { var n = e.car, t = e.companyId, o = e.damages, i = e.userId, j = (0, m.$)().t, b = (0, a.useState)({}), Z = b[0], _ = b[1], w = (0, a.useState)(!1), C = w[0], P = w[1], S = (0, a.useState)("cars_body"), k = S[0], I = S[1], O = [{ value: "cars_body", label: j("cars_body") }, { value: "cars_interior", label: j("cars_interior") }]; return (0, r.jsxs)(c.Z, { children: [(0, r.jsx)(l.Z, { title: j("vehicle_states") }), (0, r.jsx)(u.Z, {}), (0, r.jsx)(s.Z, { children: (0, r.jsxs)(d.Z, { sx: { mt: 3 }, children: [(0, r.jsx)(x.default, { open: C, onClose: function () { return P(!1) }, damagesEdit: Z, companyId: t }), (0, r.jsx)(f.ZP, { item: !0, xs: 12, children: (0, r.jsx)(y, { onChange: function (e, n) { I(n) }, value: k, variant: "scrollable", scrollButtons: "auto", textColor: "primary", indicatorColor: "primary", children: O.map((function (e) { return (0, r.jsx)(h.Z, { label: e.label, value: e.value }, e.value) })) }) }), (0, r.jsx)(f.ZP, { sx: { px: 4 }, container: !0, direction: "row", justifyContent: "center", alignItems: "stretch", spacing: 3, children: (0, r.jsxs)(f.ZP, { item: !0, xs: 12, md: 12, children: ["cars_body" === k && (0, r.jsxs)(f.ZP, { container: !0, style: { marginTop: 30 }, children: [(0, r.jsx)(f.ZP, { item: !0, xs: 12, lg: 4, children: (0, r.jsx)(p.default, { car: n, companyId: t, damages: o, userId: i }) }), (0, r.jsx)(f.ZP, { item: !0, xs: 12, lg: 6, children: (0, r.jsx)(v.default, { car: n, companyId: t, onCrashEdit: function (e) { _(e), P(!0) }, damageWhereDB: "kuzov", clientPage: "false", dataDamageClient: void 0 }) })] }), "cars_interior" === k && (0, r.jsxs)(f.ZP, { container: !0, style: { marginTop: 30 }, children: [(0, r.jsx)(f.ZP, { item: !0, xs: 12, lg: 4, children: (0, r.jsx)(g.default, { car: n, companyId: t, damages: o, userId: i }) }), (0, r.jsx)(f.ZP, { item: !0, xs: 12, lg: 6, children: (0, r.jsx)(v.default, { car: n, companyId: t, onCrashEdit: function (e) { _(e), P(!0) }, damageWhereDB: "salon", clientPage: "false", dataDamageClient: void 0 }) })] })] }) })] }) })] }) } }, 84996: function (e, n, t) { t.r(n); var r = t(34051), a = t.n(r), o = t(85893), i = t(67294), c = t(65003), l = t(5147), u = t(1902); t(96621); function s(e, n) { (null == n || n > e.length) && (n = e.length); for (var t = 0, r = new Array(n); t < n; t++)r[t] = e[t]; return r } function d(e, n, t, r, a, o, i) { try { var c = e[o](i), l = c.value } catch (u) { return void t(u) } c.done ? n(l) : Promise.resolve(l).then(r, a) } function f(e, n, t) { return n in e ? Object.defineProperty(e, n, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[n] = t, e } function h(e) { for (var n = 1; n < arguments.length; n++) { var t = null != arguments[n] ? arguments[n] : {}, r = Object.keys(t); "function" === typeof Object.getOwnPropertySymbols && (r = r.concat(Object.getOwnPropertySymbols(t).filter((function (e) { return Object.getOwnPropertyDescriptor(t, e).enumerable })))), r.forEach((function (n) { f(e, n, t[n]) })) } return e } function m(e, n) { return function (e) { if (Array.isArray(e)) return e }(e) || function (e, n) { var t = null == e ? null : "undefined" !== typeof Symbol && e[Symbol.iterator] || e["@@iterator"]; if (null != t) { var r, a, o = [], i = !0, c = !1; try { for (t = t.call(e); !(i = (r = t.next()).done) && (o.push(r.value), !n || o.length !== n); i = !0); } catch (l) { c = !0, a = l } finally { try { i || null == t.return || t.return() } finally { if (c) throw a } } return o } }(e, n) || function (e, n) { if (!e) return; if ("string" === typeof e) return s(e, n); var t = Object.prototype.toString.call(e).slice(8, -1); "Object" === t && e.constructor && (t = e.constructor.name); if ("Map" === t || "Set" === t) return Array.from(t); if ("Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)) return s(e, n) }(e, n) || function () { throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") }() } n.default = function (e) { var n = e.car, t = e.companyId, r = e.damages, s = e.userId, f = m(i.useState(""), 2), p = f[0], g = f[1], v = (0, i.useRef)(); return (0, o.jsxs)("div", { style: { width: 275, height: 340 }, children: [(0, o.jsx)(l.default, { damages: r, getPngFunction: function (e) { return v.current = e }, onPathClick: function (e) { g(e.target.getAttribute("data-id")) } }), (0, o.jsx)(c.default, { damages: r.filter((function () { return r.areaId === p })), selectedArea: p, car: n, onClose: function () { g("") }, onSave: function (e) { var n = u.Z.firestore().collection(t).doc("company").collection("carDamages"); e.forEach(function () { var e, t = (e = a().mark((function e(t) { var r, o; return a().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (t) { e.next = 2; break } return e.abrupt("return"); case 2: if (!t.id) { e.next = 6; break } n.doc(t.id).update(t), e.next = 12; break; case 6: return e.next = 8, n.add(t); case 8: return r = e.sent, o = h({}, t, { id: r.id, damageStatus: "\u041d\u043e\u0432\u043e\u0435" }), e.next = 12, r.set(o); case 12: case "end": return e.stop() } }), e) })), function () { var n = this, t = arguments; return new Promise((function (r, a) { var o = e.apply(n, t); function i(e) { d(o, r, a, i, c, "next", e) } function c(e) { d(o, r, a, i, c, "throw", e) } i(void 0) })) }); return function (e) { return t.apply(this, arguments) } }()) }, damageWhere: "kuzov", companyId: t, userId: s })] }) } }, 70106: function (e, n, t) { t.r(n); var r = t(34051), a = t.n(r), o = t(85893), i = t(67294), c = t(7906), l = t(53184), u = t(53816), s = t(53252), d = t(295), f = t(87918), h = t(26447), m = t(21023), p = t(93946), g = t(1902), v = (t(96621), t(97029)), x = t(77058), y = t(70422); function j(e, n) { (null == n || n > e.length) && (n = e.length); for (var t = 0, r = new Array(n); t < n; t++)r[t] = e[t]; return r } function b(e, n, t, r, a, o, i) { try { var c = e[o](i), l = c.value } catch (u) { return void t(u) } c.done ? n(l) : Promise.resolve(l).then(r, a) } function Z(e) { return function () { var n = this, t = arguments; return new Promise((function (r, a) { var o = e.apply(n, t); function i(e) { b(o, r, a, i, c, "next", e) } function c(e) { b(o, r, a, i, c, "throw", e) } i(void 0) })) } } function _(e, n) { return function (e) { if (Array.isArray(e)) return e }(e) || function (e, n) { var t = null == e ? null : "undefined" !== typeof Symbol && e[Symbol.iterator] || e["@@iterator"]; if (null != t) { var r, a, o = [], i = !0, c = !1; try { for (t = t.call(e); !(i = (r = t.next()).done) && (o.push(r.value), !n || o.length !== n); i = !0); } catch (l) { c = !0, a = l } finally { try { i || null == t.return || t.return() } finally { if (c) throw a } } return o } }(e, n) || function (e, n) { if (!e) return; if ("string" === typeof e) return j(e, n); var t = Object.prototype.toString.call(e).slice(8, -1); "Object" === t && e.constructor && (t = e.constructor.name); if ("Map" === t || "Set" === t) return Array.from(t); if ("Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)) return j(e, n) }(e, n) || function () { throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") }() } n.default = function (e) { var n = e.car, t = e.onCrashEdit, r = e.damageWhereDB, j = e.clientPage, b = e.dataDamageClient, w = e.companyId, C = (0, x.$)().t, P = _(i.useState([]), 2), S = P[0], k = P[1], I = function () { var e = Z(a().mark((function e() { return a().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: g.Z.firestore().collection(w).doc("company").collection("carDamages").onSnapshot(function () { var e = Z(a().mark((function e(t) { var o, i, c; return a().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return o = [], t.forEach((function (e) { return o.push(e.data()) })), e.next = 4, Promise.all(o); case 4: i = e.sent, c = i.filter((function (e) { return e.car_id === (null === n || void 0 === n ? void 0 : n.id) && e.damageWhere === r && "\u041d\u043e\u0432\u043e\u0435" === e.damageStatus })), k(c); case 7: case "end": return e.stop() } }), e) }))); return function (n) { return e.apply(this, arguments) } }()); case 2: case "end": return e.stop() } }), e) }))); return function () { return e.apply(this, arguments) } }(); return i.useEffect((function () { "true" === j ? k(b) : I() }), [b]), (0, o.jsx)("div", { children: (0, o.jsxs)(c.Z, { children: [(0, o.jsx)(l.Z, { children: (0, o.jsxs)(u.Z, { children: [(0, o.jsx)(s.Z, { children: C("cars_palce") }), (0, o.jsx)(s.Z, { children: C("cars_damage_type") }), (0, o.jsx)(s.Z, { children: C("cars_damage_level") }), (0, o.jsx)(s.Z, { children: C("cars_damage_client") }), (0, o.jsx)(s.Z, { align: "center", sx: { pr: 3 }, children: C("Actions") })] }) }), (0, o.jsx)(d.Z, { children: S && S.map((function (e, n) { return (0, o.jsxs)(u.Z, { hover: !0, children: [(0, o.jsx)(s.Z, { sx: { cursor: "pointer" }, onClick: function () { t(e) }, children: e.areaId }), (0, o.jsx)(s.Z, { sx: { cursor: "pointer" }, onClick: function () { t(e) }, children: e.damage_type }), (0, o.jsxs)(s.Z, { sx: { cursor: "pointer" }, onClick: function () { t(e) }, children: ["Low" === e.value && (0, o.jsx)(f.Z, { label: C("cars_damage_level_low"), color: "info" }), "Middle" === e.value && (0, o.jsx)(f.Z, { label: C("cars_damage_level_middle"), color: "warning" }), "High" === e.value && (0, o.jsx)(f.Z, { label: C("cars_damage_level_high"), color: "error" })] }), (0, o.jsx)(s.Z, { sx: { cursor: "pointer" }, onClick: function () { t(e) }, children: e.client }), (0, o.jsx)(s.Z, { align: "center", sx: { pr: 3 }, children: (0, o.jsxs)(h.Z, { direction: "row", justifyContent: "center", alignItems: "center", children: [(0, o.jsx)(m.Z, { placement: "top", title: "Edit", children: (0, o.jsx)(p.Z, { onClick: function () { t(e) }, color: "primary", "aria-label": "delete", children: (0, o.jsx)(y.Z, { sx: { fontSize: "1.1rem" } }) }) }), (0, o.jsx)(m.Z, { placement: "top", title: "Delete", children: (0, o.jsx)(v.Z, { document: e, collection: "carDamages" }) })] }) })] }, n) })) })] }) }) } }, 12908: function (e, n, t) { t.r(n), t.d(n, { default: function () { return E } }); var r = t(34051), a = t.n(r), o = t(85893), i = t(67294), c = t(6585), l = t(64666), u = t(33090), s = t(15861), d = t(31425), f = t(83321), h = t(6514), m = t(86886), p = t(50135), g = t(87357), v = t(72890), x = t(50480), y = t(36872), j = t(18972), b = t(66242), Z = t(78445), _ = t(44267), w = t(73400), C = t(77058), P = t(1902); t(96621); function S(e, n) { (null == n || n > e.length) && (n = e.length); for (var t = 0, r = new Array(n); t < n; t++)r[t] = e[t]; return r } function k(e, n, t, r, a, o, i) { try { var c = e[o](i), l = c.value } catch (u) { return void t(u) } c.done ? n(l) : Promise.resolve(l).then(r, a) } function I(e) { return function () { var n = this, t = arguments; return new Promise((function (r, a) { var o = e.apply(n, t); function i(e) { k(o, r, a, i, c, "next", e) } function c(e) { k(o, r, a, i, c, "throw", e) } i(void 0) })) } } function O(e, n, t) { return n in e ? Object.defineProperty(e, n, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[n] = t, e } function A(e) { for (var n = 1; n < arguments.length; n++) { var t = null != arguments[n] ? arguments[n] : {}, r = Object.keys(t); "function" === typeof Object.getOwnPropertySymbols && (r = r.concat(Object.getOwnPropertySymbols(t).filter((function (e) { return Object.getOwnPropertyDescriptor(t, e).enumerable })))), r.forEach((function (n) { O(e, n, t[n]) })) } return e } function D(e, n) { return function (e) { if (Array.isArray(e)) return e }(e) || function (e, n) { var t = null == e ? null : "undefined" !== typeof Symbol && e[Symbol.iterator] || e["@@iterator"]; if (null != t) { var r, a, o = [], i = !0, c = !1; try { for (t = t.call(e); !(i = (r = t.next()).done) && (o.push(r.value), !n || o.length !== n); i = !0); } catch (l) { c = !0, a = l } finally { try { i || null == t.return || t.return() } finally { if (c) throw a } } return o } }(e, n) || function (e, n) { if (!e) return; if ("string" === typeof e) return S(e, n); var t = Object.prototype.toString.call(e).slice(8, -1); "Object" === t && e.constructor && (t = e.constructor.name); if ("Map" === t || "Set" === t) return Array.from(t); if ("Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)) return S(e, n) }(e, n) || function () { throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") }() } function E(e) { var n = e.open, t = e.onClose, r = e.damagesEdit, S = e.companyId, k = (0, C.$)().t, O = (0, w.Ds)().enqueueSnackbar, E = i.useRef(null), T = [{ title: k("cars_damage_level_low"), value: "Low" }, { title: k("cars_damage_level_middle"), value: "Middle" }, { title: k("cars_damage_level_high"), value: "High" }], W = D(i.useState([]), 2), z = W[0], M = W[1], B = function () { var e = I(a().mark((function e() { return a().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: P.Z.firestore().collection(S).doc("company").collection("clients").onSnapshot((function (e) { var n = []; e.forEach((function (e) { return n.push(e.data()) })), M(n) })); case 2: case "end": return e.stop() } }), e) }))); return function () { return e.apply(this, arguments) } }(); (0, i.useEffect)((function () { B() }), []); var $ = (0, i.useRef)(null), R = function (e) { console.log("imagePassport1 in handleUploadPassport1", e), P.Z.storage().ref("".concat(S, "/crm/damage/").concat(r.damageWhere, "/").concat(e.name)).put(e).on("state_changed", (function (e) { Math.round(e.bytesTransferred / e.totalBytes * 100) }), (function (e) { console.log(e) }), (function () { P.Z.storage().ref("".concat(S, "/crm/damage/").concat(r.damageWhere, "/")).child(e.name).getDownloadURL().then((function (e) { !function (e) { H(A({}, r, { damage_image: e })) }(e) })) })) }; (0, i.useEffect)((function () { return H(r) }), [n]); var U = D(i.useState({ damage_type: r.damage_type }), 2), F = U[0], H = U[1], L = function () { var e = I(a().mark((function e(n) { return a().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, P.Z.firestore().collection(S).doc("company").collection("carDamages").doc(n.id).set(n); case 2: O(k("Saved"), { variant: "success", anchorOrigin: { vertical: "top", horizontal: "right" }, TransitionComponent: c.Z }), t(); case 4: case "end": return e.stop() } }), e) }))); return function (n) { return e.apply(this, arguments) } }(); return (0, o.jsxs)(l.Z, { open: n, onClose: t, "aria-labelledby": "max-width-dialog-title", children: [(0, o.jsxs)(u.Z, { id: "max-width-dialog-title", children: [(0, o.jsx)(s.Z, { variant: "h4", children: k("cars_damage_download_photo") }), (0, o.jsxs)(d.Z, { sx: { pr: 2.5 }, children: [(0, o.jsx)("div", { children: (0, o.jsx)(f.Z, { onClick: function () { return L(F) }, variant: "contained", color: "primary", children: k("Save") }) }), (0, o.jsx)("div", { children: (0, o.jsx)(f.Z, { onClick: t, variant: "contained", color: "error", children: k("Back") }) })] })] }), (0, o.jsxs)(h.Z, { children: [(0, o.jsxs)(m.ZP, { container: !0, spacing: 3, style: { marginTop: 10 }, children: [(0, o.jsx)(m.ZP, { item: !0, xs: 12, md: 12, children: (0, o.jsx)(p.Z, { value: F.damage_type || "", onChange: function (e) { H(A({}, F, { damage_type: e.target.value })) }, fullWidth: !0, label: k("cars_damage_type"), variant: "outlined" }) }), (0, o.jsx)(m.ZP, { item: !0, xs: 12, md: 12, children: (0, o.jsx)(p.Z, { value: F.comment || "", onChange: function (e) { H(A({}, F, { comment: e.target.value })) }, fullWidth: !0, label: k("cars_damage_description"), variant: "outlined" }) }), (0, o.jsx)(m.ZP, { item: !0, xs: 12, children: (0, o.jsx)(g.Z, { title: k("cars_damage_level"), style: { marginTop: 15 }, children: (0, o.jsx)(v.Z, { ref: E, "aria-label": "ringtone", name: "ringtone", value: F.value || "-1", onChange: function (e) { H(A({}, F, { value: e.target.value })) }, children: T.map((function (e) { return (0, o.jsx)(x.Z, { value: e.value, control: (0, o.jsx)(y.Z, {}), label: e.title }, e.value) })) }) }) }), (0, o.jsx)(m.ZP, { item: !0, xs: 12, md: 12, children: (0, o.jsx)(p.Z, { select: !0, fullWidth: !0, label: k("cars_damage_client"), value: F.client || "", onChange: function (e) { var n = z.findIndex((function (n) { return n.client_surname + " " + n.client_name === e.target.value })); -1 !== n && H(A({}, F, { client: e.target.value, client_id: z[n].id })) }, variant: "outlined", children: z.map((function (e) { return (0, o.jsx)(j.Z, { value: e.client_surname + " " + e.client_name, children: e.client_surname + " " + e.client_name }, e.client_name) })) }) })] }), (0, o.jsx)(m.ZP, { item: !0, xs: 12, md: 12, style: { marginTop: 10 }, children: (0, o.jsxs)(b.Z, { children: [(0, o.jsx)(Z.Z, { title: k("cars_damage_photo") }), (0, o.jsxs)(_.Z, { children: [(0, o.jsx)("div", { style: { width: "100%", height: "100%" }, onClick: function () { $.current.click() }, children: (0, o.jsx)("img", { alt: "", src: (null === F || void 0 === F ? void 0 : F.damage_image) || "https://www.aluminati.net/wp-content/uploads/2016/03/img-placeholder.png", style: { width: "100%", height: "100%", minHeight: 150, objectFit: "cover" } }) }), (0, o.jsx)("input", { type: "file", onChange: function (e) { return R(e.target.files[0]) }, style: { width: .1, height: .1, opacity: 0, pointerEvents: "none" }, ref: $ })] })] }) })] })] }) } }, 97029: function (e, n, t) { t.d(n, { Z: function () { return b } }); var r = t(85893), a = t(67294), o = t(90948), i = t(87952), c = t(83321), l = t(6585), u = t(93946), s = t(64666), d = t(87357), f = t(15861), h = t(52521), m = t(50594), p = t(77058), g = t(75920), v = t(73400), x = t(1902), y = (t(96621), (0, o.ZP)(i.Z)((function (e) { var n = e.theme; return "\n      background-color: ".concat(n.colors.error.lighter, ";\n      color: ").concat(n.colors.error.main, ";\n      width: ").concat(n.spacing(12), ";\n      height: ").concat(n.spacing(12), ";\n\n      .MuiSvgIcon-root {\n        font-size: ").concat(n.typography.pxToRem(45), ";\n      }\n") }))), j = (0, o.ZP)(c.Z)((function (e) { var n = e.theme; return "\n     background: ".concat(n.colors.error.main, ";\n     color: ").concat(n.palette.error.contrastText, ";\n\n     &:hover {\n        background: ").concat(n.colors.error.dark, ";\n     }\n    ") })); function b(e) { var n = e.collection, t = e.document, o = (0, p.$)().t, i = (0, a.useState)(!1), b = i[0], Z = i[1], _ = (0, v.Ds)().enqueueSnackbar, w = (0, g.a)().user, C = function () { Z(!1) }; return (0, r.jsxs)(r.Fragment, { children: [(0, r.jsx)(u.Z, { onClick: function () { Z(!0) }, color: "error", children: (0, r.jsx)(h.Z, {}) }), (0, r.jsx)(s.Z, { open: b, onClose: C, "aria-labelledby": "alert-dialog-title", "aria-describedby": "alert-dialog-description", sx: { p: 3 }, children: (0, r.jsxs)(d.Z, { display: "flex", alignItems: "center", justifyContent: "center", flexDirection: "column", p: 5, children: [(0, r.jsx)(y, { children: (0, r.jsx)(m.Z, {}) }), (0, r.jsxs)(f.Z, { align: "center", sx: { py: 4, px: 6 }, variant: "h3", children: [o("ConfirmDelete_title"), o("ConfirmDelete_body")] }), (0, r.jsxs)(d.Z, { children: [(0, r.jsx)(c.Z, { variant: "text", size: "large", sx: { mx: 1 }, onClick: C, children: o("Back") }), (0, r.jsx)(j, { onClick: function () { var e; e = t, x.Z.firestore().collection(null === w || void 0 === w ? void 0 : w.company_id).doc("company").collection(n).doc(null === e || void 0 === e ? void 0 : e.id).delete(), _(o("Deleted"), { variant: "error", anchorOrigin: { vertical: "top", horizontal: "right" }, TransitionComponent: l.Z }), C() }, size: "large", sx: { mx: 1, px: 3 }, variant: "contained", children: o("Delete") })] })] }) })] }) } } }]);